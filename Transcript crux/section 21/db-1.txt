üóÑ Connecting Backend to Database (MongoDB + Mongoose)

So far, we have completed the project setup.
Now the next step is to connect our backend application to a database.

---

üß† Application Architecture Overview

Client ‚Üí Server (Backend) ‚Üí Database

The database can:
- Live on the same server
- Live on a different server
- Be hosted online (cloud)

In our case, we use MongoDB Atlas (cloud-hosted MongoDB).

---

üì¶ Why Use Mongoose?

Our application can directly interact with MongoDB,
but instead we add an additional layer called Mongoose.

Mongoose acts as:
- ORM (Object Relational Mapper)
- ODM (Object Document Mapper)

Since MongoDB uses documents (not tables),
ODM is technically correct, but ORM and ODM are used interchangeably in industry.

Mongoose helps with:
- Validation
- Casting
- Schema enforcement
- Cleaner syntax
- Less boilerplate

---

üì• Installing Mongoose

npm install mongoose

After installation, mongoose appears in package.json dependencies.

---

üîê MongoDB Connection Security

Database credentials are sensitive.
They must be stored in environment variables.

Example:
process.env.MONGO_URI

Never hardcode database URLs.

---

üìÅ Database Connection File

Location:
src/db/index.js

(You can name it anything, but index.js is common when there is only one DB file.)

---

üõ† Database Connection Code

import mongoose from "mongoose";

const connectDB = async () => {
  try {
    await mongoose.connect(process.env.MONGO_URI);
    console.log("‚úÖ MongoDB connected");
  } catch (error) {
    console.error("‚ùå MongoDB connection error:", error);
    process.exit(1);
  }
};

export default connectDB;

---

üß© Why Use try-catch?

Many things can go wrong:
- Wrong URI
- Wrong password
- Network failure
- MongoDB server down

If DB connection fails:
- Application should NOT continue
- Server must stop immediately

process.exit(1) safely terminates the app.

---

üß† Key Takeaways

- MongoDB Atlas provides cloud database
- Mongoose is the recommended MongoDB abstraction
- DB connection logic should live in a separate file
- Sensitive DB credentials go in .env
- Always handle DB connection errors gracefully

---

üìå What‚Äôs Next?

Next step:
- Create MongoDB Atlas account
- Generate MongoDB URI
- Add URI to .env
- Connect database to server startup
